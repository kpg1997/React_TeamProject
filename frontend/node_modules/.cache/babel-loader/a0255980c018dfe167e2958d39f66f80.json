{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\test22\\\\frontend\\\\src\\\\components\\\\views\\\\Board\\\\FreeBoardDetailPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { Link, matchPath, withRouter } from \"react-router-dom\"; // import * as qs from \"query-string\";\n// import { ButtonToolbar, Button } from \"react-bootstrap\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getReplyRead } from \"../../../_actions/board_action\";\nimport Moment from \"react-moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TableDivStyled = styled.div`\n  width: 650px;\n  margin: auto;\n  table {\n    width: 650px;\n    th,\n    td {\n      white-space: normal;\n      border: 1px solid #444444;\n    }\n    text-align: center;\n    th {\n      width: 80px;\n    }\n    td {\n      width: 150px;\n    }\n    .fTitle {\n      word-break:break-all;\n      width: 540px;\n    }\n    .writeContent {\n      div{\n        img{\n          max-width:200px;\n          max-height:210px;\n        }\n      }\n      width: 540px; \n      word-break:break-all;\n      height: 400px;\n    }\n  }\n`;\n_c = TableDivStyled;\nconst ReplyContentStyled = styled.div`\n  width: 660px;\n  margin: auto;\n  form {\n    input {\n      vertical-align: middle;\n      width: 500px;\n      height: 30px;\n    }\n    div {\n    vertical-align: middle;\n    display: inline-block;\n    margin: 15px 15px 15px 0;\n    button {\n      box-shadow: 2px 2px 2px gray;\n      border-radius: 20px;\n      vertical-align: middle;\n      width: 100px;\n      height: 30px;\n      font-size: 15px;\n      margin: 0 0 0 20px;\n      background-color:salmon;\n      color:white;\n    }\n  }\n  }\n`;\n_c2 = ReplyContentStyled;\nconst ReplyListStyled = styled.div``;\n_c3 = ReplyListStyled;\nconst UserClickStyled = styled.div`\n  div {\n    vertical-align: middle;\n    display: inline-block;\n    margin: 15px 15px 15px 0;\n    button {\n      background-color:salmon;\n      color:white;\n      box-shadow: 2px 2px 2px gray;\n      border-radius: 20px;\n      vertical-align: middle;\n      width: 100px;\n      height: 30px;\n      font-size: 15px;\n      margin: 0 0 0 20px;\n    }\n  }\n`;\n_c4 = UserClickStyled;\nconst ReplyItemStyled = styled.div`\n  width: 650px;\n  div {\n    display: inline-block;\n  }\n  .reUserid {\n    vertical-align: middle;\n    width: 150px;\n    margin: 0 15px 0 0;\n  }\n  .reContent {\n    white-space: normal;\n    width: 300px;\n    margin: 0 15px 0 0;\n  }\n  .reDate {\n    width: 150px;\n  }\n`;\n_c5 = ReplyItemStyled;\n\nconst FreeBoardDetailPage = ({\n  match,\n  props,\n  history\n}) => {\n  _s();\n\n  const user = useSelector(state => state.user);\n  console.log(\"user.userData\", user);\n\n  const onDelClick = e => {\n    // console.log('user.userData.id ==> ',user.userData.id)\n    if (user.userData.isAuth == false) {\n      history.push(\"/users/login\");\n    } else if (user.userData.id != lists.fUserid) {\n      alert(\"해당 사용자가 아닙니다.\");\n      return false;\n    } else {\n      const con = window.confirm(\"삭제하시겠습니까?\");\n\n      if (con == true) {\n        const delNum = match.params.fno;\n        axios.delete(`/freeBoard/del/${delNum}`).then(history.push(\"/freeBoard\"));\n      } else {\n        return false;\n      }\n    }\n  };\n\n  const [lists, setLists] = useState([// {\n    //   fNo: \"\",\n    //   fTitle: \"\",\n    //   fUserid: \"\",\n    //   fContent: \"\",\n    //   fDate: \"\",\n    //   fLike: \"\",\n    //   fView: \"\",\n    // },\n  ]);\n  const [reply, setReply] = useState([// {\n    //   fReUserid: \"\",\n    //   fReComment: \"\",\n    //   fReDate: \"\",\n    // },\n  ]);\n  const dispatch = useDispatch();\n  useEffect(async () => {\n    try {\n      const fNo = match.params.fno;\n      dispatch(getReplyRead(fNo));\n      const res = await axios.get(`/freeBoard/${fNo}`);\n      const inputdata = await res.data.data.freeboard.map(data => ({\n        fNo: data.fNo,\n        fTitle: data.fTitle,\n        fUserid: data.fUserid,\n        fContent: data.fContent,\n        fDate: data.fDate,\n        fLike: data.fLike,\n        fView: data.fView\n      })); // 댓글\n\n      const replydata = await res.data.data.Reply.map(data => ({\n        fReNo: data.fReNo,\n        fReUserid: data.fReUserid,\n        fReComment: data.fReComment,\n        fReDate: data.fReDate\n      }));\n      console.log(\"replydata ==> \", replydata);\n      setLists(inputdata[0]);\n      setReply(reply.concat(replydata));\n    } catch (error) {\n      console.log(error);\n    }\n  }, // []\n  [dispatch]); // useEffect(() => {\n  //   const fNo = match.params.fno;\n  //   dispatch(getReplyRead(fNo));\n  // }, [dispatch]);\n\n  const [writereply, setWriteRely] = useState(\"\");\n\n  const writereplyChange = e => {\n    setWriteRely(e.currentTarget.value);\n  };\n\n  const writeReplySubmit = e => {\n    // e.preventDefault();\n    const fNo = match.params.fno;\n\n    if (user.userData.isAuth == false) {\n      history.push(\"/users/login\");\n    } else if (writereply == \"\") {\n      return alert(\"댓글을 입력하시오\");\n    } else {\n      axios.post(`/freeBoard/fReply/write/${fNo}`, {\n        fBoardNo: fNo,\n        fReComment: writereply\n      });\n      setWriteRely(\"\"); // .then((res) => alert('resresresresresresres',res)).catch(e => {console.log(e)});\n\n      history.push(`/freeBoard/${fNo}`);\n    }\n  };\n\n  const updateButton = () => {\n    if (user.userData.isAuth == false) {\n      history.push(\"/users/login\");\n    } else if (user.userData.id != lists.fUserid) {\n      alert(\"해당 사용자가 아닙니다.\");\n      return false;\n    } else {\n      const con = window.confirm(\"수정페이지 이동시 그 전 내용은 삭제됩니다.\");\n\n      if (con == true) {\n        history.push(`/freeBoardupdate/${lists.fNo}`);\n      } else {\n        return false;\n      }\n    }\n  };\n\n  const onClickFreeBoardList = () => {\n    history.push('/freeBoard');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"FreeBoardDetailDiv\",\n    children: [/*#__PURE__*/_jsxDEV(TableDivStyled, {\n      className: \"FreeBoardDetailTableDiv\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uAE00\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: lists.fNo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uC791\\uC131\\uC790\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: lists.fUserid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uC791\\uC131\\uB0A0\\uC9DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Moment, {\n              format: \"YYYY/MM/DD\",\n              children: lists.fDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uC870\\uD68C\\uC218\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: lists.fView\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uC81C\\uBAA9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            colspan: \"3\",\n            className: \"fTitle\",\n            children: lists.fTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"content\",\n            children: \"\\uB0B4\\uC6A9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"writeContent\",\n            colspan: \"3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              dangerouslySetInnerHTML: {\n                __html: lists.fContent\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, lists.fNo, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UserClickStyled, {\n        className: \"FreeBoardDetailButtonDiv\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClickFreeBoardList,\n            children: \"\\uBAA9\\uB85D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: updateButton,\n            children: \"\\uC218\\uC815\\uD558\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onDelClick,\n            children: \"\\uC0AD\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReplyContentStyled, {\n      className: \"ReplyContentStyled\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: writeReplySubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: writereplyChange,\n          value: writereply\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            children: \"\\uC791\\uC131\\uD558\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReplyListStyled, {\n        className: \"ReplyListStyled\",\n        children: reply.map(re => {\n          return /*#__PURE__*/_jsxDEV(ReplyItemStyled, {\n            className: \"ReplyItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reUserid\",\n              children: re.fReUserid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reContent\",\n              children: re.fReComment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reDate\",\n              children: /*#__PURE__*/_jsxDEV(Moment, {\n                format: \"YYYY/MM/DD\",\n                children: re.fReDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this)]\n          }, re.fReNo, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FreeBoardDetailPage, \"TZbVnkROWN71yhzYGZL8E7ntjIs=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c6 = FreeBoardDetailPage;\nexport default _c7 = withRouter(FreeBoardDetailPage);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"TableDivStyled\");\n$RefreshReg$(_c2, \"ReplyContentStyled\");\n$RefreshReg$(_c3, \"ReplyListStyled\");\n$RefreshReg$(_c4, \"UserClickStyled\");\n$RefreshReg$(_c5, \"ReplyItemStyled\");\n$RefreshReg$(_c6, \"FreeBoardDetailPage\");\n$RefreshReg$(_c7, \"%default%\");","map":{"version":3,"sources":["C:/Users/User/Desktop/test22/frontend/src/components/views/Board/FreeBoardDetailPage.js"],"names":["React","useEffect","useState","styled","axios","Link","matchPath","withRouter","useDispatch","useSelector","getReplyRead","Moment","TableDivStyled","div","ReplyContentStyled","ReplyListStyled","UserClickStyled","ReplyItemStyled","FreeBoardDetailPage","match","props","history","user","state","console","log","onDelClick","e","userData","isAuth","push","id","lists","fUserid","alert","con","window","confirm","delNum","params","fno","delete","then","setLists","reply","setReply","dispatch","fNo","res","get","inputdata","data","freeboard","map","fTitle","fContent","fDate","fLike","fView","replydata","Reply","fReNo","fReUserid","fReComment","fReDate","concat","error","writereply","setWriteRely","writereplyChange","currentTarget","value","writeReplySubmit","post","fBoardNo","updateButton","onClickFreeBoardList","__html","re"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,UAA1B,QAA4C,kBAA5C,C,CACA;AACA;;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,YAAT,QAA6B,gCAA7B;AACA,OAAOC,MAAP,MAAmB,cAAnB;;AAEA,MAAMC,cAAc,GAAGT,MAAM,CAACU,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjCA;KAAMD,c;AAkCN,MAAME,kBAAkB,GAAGX,MAAM,CAACU,GAAI;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA1BA;MAAMC,kB;AA2BN,MAAMC,eAAe,GAAGZ,MAAM,CAACU,GAAI,EAAnC;MAAME,e;AAEN,MAAMC,eAAe,GAAGb,MAAM,CAACU,GAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjBA;MAAMG,e;AAmBN,MAAMC,eAAe,GAAGd,MAAM,CAACU,GAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAlBA;MAAMI,e;;AAoBN,MAAMC,mBAAmB,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,KAAT;AAAgBC,EAAAA;AAAhB,CAAD,KAA+B;AAAA;;AACzD,QAAMC,IAAI,GAAGb,WAAW,CAAEc,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AACAE,EAAAA,O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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\nimport { Link, matchPath, withRouter } from \"react-router-dom\";\r\n// import * as qs from \"query-string\";\r\n// import { ButtonToolbar, Button } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getReplyRead } from \"../../../_actions/board_action\";\r\nimport Moment from \"react-moment\";\r\n\r\nconst TableDivStyled = styled.div`\r\n  width: 650px;\r\n  margin: auto;\r\n  table {\r\n    width: 650px;\r\n    th,\r\n    td {\r\n      white-space: normal;\r\n      border: 1px solid #444444;\r\n    }\r\n    text-align: center;\r\n    th {\r\n      width: 80px;\r\n    }\r\n    td {\r\n      width: 150px;\r\n    }\r\n    .fTitle {\r\n      word-break:break-all;\r\n      width: 540px;\r\n    }\r\n    .writeContent {\r\n      div{\r\n        img{\r\n          max-width:200px;\r\n          max-height:210px;\r\n        }\r\n      }\r\n      width: 540px; \r\n      word-break:break-all;\r\n      height: 400px;\r\n    }\r\n  }\r\n`;\r\nconst ReplyContentStyled = styled.div`\r\n  width: 660px;\r\n  margin: auto;\r\n  form {\r\n    input {\r\n      vertical-align: middle;\r\n      width: 500px;\r\n      height: 30px;\r\n    }\r\n    div {\r\n    vertical-align: middle;\r\n    display: inline-block;\r\n    margin: 15px 15px 15px 0;\r\n    button {\r\n      box-shadow: 2px 2px 2px gray;\r\n      border-radius: 20px;\r\n      vertical-align: middle;\r\n      width: 100px;\r\n      height: 30px;\r\n      font-size: 15px;\r\n      margin: 0 0 0 20px;\r\n      background-color:salmon;\r\n      color:white;\r\n    }\r\n  }\r\n  }\r\n`;\r\nconst ReplyListStyled = styled.div``;\r\n\r\nconst UserClickStyled = styled.div`\r\n  div {\r\n    vertical-align: middle;\r\n    display: inline-block;\r\n    margin: 15px 15px 15px 0;\r\n    button {\r\n      background-color:salmon;\r\n      color:white;\r\n      box-shadow: 2px 2px 2px gray;\r\n      border-radius: 20px;\r\n      vertical-align: middle;\r\n      width: 100px;\r\n      height: 30px;\r\n      font-size: 15px;\r\n      margin: 0 0 0 20px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ReplyItemStyled = styled.div`\r\n  width: 650px;\r\n  div {\r\n    display: inline-block;\r\n  }\r\n  .reUserid {\r\n    vertical-align: middle;\r\n    width: 150px;\r\n    margin: 0 15px 0 0;\r\n  }\r\n  .reContent {\r\n    white-space: normal;\r\n    width: 300px;\r\n    margin: 0 15px 0 0;\r\n  }\r\n  .reDate {\r\n    width: 150px;\r\n  }\r\n`;\r\n\r\nconst FreeBoardDetailPage = ({ match, props, history }) => {\r\n  const user = useSelector((state) => state.user);\r\n  console.log(\"user.userData\", user);\r\n\r\n  const onDelClick = (e) => {\r\n    // console.log('user.userData.id ==> ',user.userData.id)\r\n    if (user.userData.isAuth == false) {\r\n      history.push(\"/users/login\");\r\n    } else if (user.userData.id != lists.fUserid) {\r\n      alert(\"해당 사용자가 아닙니다.\");\r\n      return false;\r\n    } else {\r\n      const con = window.confirm(\"삭제하시겠습니까?\");\r\n      if (con == true) {\r\n        const delNum = match.params.fno;\r\n        axios\r\n          .delete(`/freeBoard/del/${delNum}`)\r\n          .then(history.push(\"/freeBoard\"));\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const [lists, setLists] = useState([\r\n    // {\r\n    //   fNo: \"\",\r\n    //   fTitle: \"\",\r\n    //   fUserid: \"\",\r\n    //   fContent: \"\",\r\n    //   fDate: \"\",\r\n    //   fLike: \"\",\r\n    //   fView: \"\",\r\n    // },\r\n  ]);\r\n\r\n  const [reply, setReply] = useState([\r\n    // {\r\n    //   fReUserid: \"\",\r\n    //   fReComment: \"\",\r\n    //   fReDate: \"\",\r\n    // },\r\n  ]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    async () => {\r\n      try {\r\n        const fNo = match.params.fno;\r\n        dispatch(getReplyRead(fNo));\r\n        const res = await axios.get(`/freeBoard/${fNo}`);\r\n        const inputdata = await res.data.data.freeboard.map((data) => ({\r\n          fNo: data.fNo,\r\n          fTitle: data.fTitle,\r\n          fUserid: data.fUserid,\r\n          fContent: data.fContent,\r\n          fDate: data.fDate,\r\n          fLike: data.fLike,\r\n          fView: data.fView,\r\n        }));\r\n        // 댓글\r\n        const replydata = await res.data.data.Reply.map((data) => ({\r\n          fReNo:data.fReNo,\r\n          fReUserid: data.fReUserid,\r\n          fReComment: data.fReComment,\r\n          fReDate: data.fReDate,\r\n        }));\r\n        console.log(\"replydata ==> \", replydata);\r\n        setLists(inputdata[0]);\r\n        setReply(reply.concat(replydata));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // []\r\n    [dispatch]\r\n  );\r\n\r\n  // useEffect(() => {\r\n  //   const fNo = match.params.fno;\r\n  //   dispatch(getReplyRead(fNo));\r\n  // }, [dispatch]);\r\n\r\n  const [writereply, setWriteRely] = useState(\"\");\r\n\r\n  const writereplyChange = (e) => {\r\n    setWriteRely(e.currentTarget.value);\r\n  };\r\n\r\n  const writeReplySubmit = (e) => {\r\n    // e.preventDefault();\r\n    const fNo = match.params.fno;\r\n    if (user.userData.isAuth == false) {\r\n      history.push(\"/users/login\");\r\n    } else if (writereply == \"\") {\r\n      return alert(\"댓글을 입력하시오\");\r\n    } else {\r\n      axios.post(`/freeBoard/fReply/write/${fNo}`, {\r\n        fBoardNo: fNo,\r\n        fReComment: writereply,\r\n      });\r\n      setWriteRely(\"\");\r\n      // .then((res) => alert('resresresresresresres',res)).catch(e => {console.log(e)});\r\n      history.push(`/freeBoard/${fNo}`);\r\n    }\r\n  };\r\n\r\n  const updateButton = () => {\r\n    if (user.userData.isAuth == false) {\r\n      history.push(\"/users/login\");\r\n    } else if (user.userData.id != lists.fUserid) {\r\n      alert(\"해당 사용자가 아닙니다.\");\r\n      return false;\r\n    } else {\r\n      const con = window.confirm(\"수정페이지 이동시 그 전 내용은 삭제됩니다.\");\r\n      if (con == true) {\r\n        history.push(`/freeBoardupdate/${lists.fNo}`);\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const onClickFreeBoardList=() =>{\r\n    history.push('/freeBoard')\r\n  }\r\n\r\n  return (\r\n    <div className='FreeBoardDetailDiv'>\r\n      <TableDivStyled className=\"FreeBoardDetailTableDiv\">\r\n        <table key={lists.fNo}>\r\n          <tr>\r\n            <th>글번호</th>\r\n            <td>{lists.fNo}</td>\r\n            <th>작성자</th>\r\n            <td>{lists.fUserid}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>작성날짜</th>\r\n            <td>\r\n              <Moment format=\"YYYY/MM/DD\">{lists.fDate}</Moment>\r\n            </td>\r\n            <th>조회수</th>\r\n            <td>{lists.fView}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>제목</th>\r\n            <td colspan=\"3\" className=\"fTitle\" >\r\n              {lists.fTitle}\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <th className=\"content\">내용</th>\r\n            <td className=\"writeContent\" colspan=\"3\">\r\n              <div dangerouslySetInnerHTML={{ __html: lists.fContent }} />\r\n            </td>\r\n          </tr>\r\n        </table>\r\n        <UserClickStyled className=\"FreeBoardDetailButtonDiv\">\r\n          <div>\r\n            <button onClick={onClickFreeBoardList}>목록</button>\r\n          </div>\r\n          {/* 하지만 새로 고침시 useSelector가 사라져서 오류가 뜬다.... */}\r\n          {/* {user.userData.id == lists.fUserid ? ( */}\r\n          <div>\r\n            <button onClick={updateButton}>수정하기</button>\r\n          </div>\r\n          <div>\r\n            <button onClick={onDelClick}>삭제</button>\r\n          </div>\r\n          {/* ) : (\r\n            <></>\r\n          )} */}\r\n        </UserClickStyled>\r\n      </TableDivStyled>\r\n      <ReplyContentStyled className=\"ReplyContentStyled\">\r\n        <form onSubmit={writeReplySubmit}>\r\n          <input type=\"text\" onChange={writereplyChange} value={writereply} />\r\n          <div><button className=\"but\">작성하기</button></div>\r\n        </form>\r\n        <ReplyListStyled className=\"ReplyListStyled\">\r\n          {reply.map((re) => {\r\n            return (\r\n              <ReplyItemStyled key={re.fReNo} className=\"ReplyItem\">\r\n                <div className=\"reUserid\">{re.fReUserid}</div>\r\n                <div className=\"reContent\">{re.fReComment}</div>\r\n                <div className=\"reDate\">\r\n                  <Moment format=\"YYYY/MM/DD\">{re.fReDate}</Moment>\r\n                </div>\r\n                <hr />\r\n              </ReplyItemStyled>\r\n            );\r\n          })}\r\n        </ReplyListStyled>\r\n      </ReplyContentStyled>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(FreeBoardDetailPage);\r\n"]},"metadata":{},"sourceType":"module"}